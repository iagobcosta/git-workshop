# Gest√£o de configura√ß√£o - Git

## Aula 3: Tags, Hooks e Recupera√ß√£o

_Objetivos:_

- Compreender como usar tags para marcar pontos espec√≠ficos no hist√≥rico do c√≥digo como vers√µes importantes.
- Aprender a usar Git Hooks para automatizar tarefas e aprimorar o fluxo de trabalho.
- Aprender a usar git revert e git reset para reverter altera√ß√µes e recuperar de erros.

_Conte√∫dos:_

- Cria√ß√£o de tags, tipos de tags (leves e anotadas), visualiza√ß√£o de tags, checkout para tags, exclus√£o de tags.
- Uso de Git Hooks para automatizar tarefas.
- Uso de git revert e git reset para recupera√ß√£o de desastres.

_Atividades:_

- Pr√°tica de cria√ß√£o de tags em pontos importantes do hist√≥rico do c√≥digo.
- Configura√ß√£o e execu√ß√£o de Git Hooks para automatizar tarefas espec√≠ficas.
- Exerc√≠cios de uso de git revert e git reset para reverter altera√ß√µes e recuperar de erros.

_Recursos Complementares:_

- Documenta√ß√£o oficial do Git sobre tags, hooks e recupera√ß√£o.
- Tutoriais online sobre o uso avan√ßado de tags, hooks e recupera√ß√£o no Git.

## Pr√©-requisitos

- Conhecimento b√°sico de Git e controle de vers√£o.
- Familiaridade com o uso do terminal ou linha de comando.
- Compreens√£o dos conceitos de branches e commits no Git.
- Familiaridade com os comandos do Git, como commit, branch e merge.
- Ter um reposit√≥rio Git configurado localmente.

## Refer√™ncias

Aqui est√£o algumas refer√™ncias √∫teis sobre Git tag, Git hook, Git reset e Git revert:

- Documenta√ß√£o oficial do Git sobre tags: [Git Tag Documentation](https://git-scm.com/book/en/v2/Git-Basics-Tagging)
- Documenta√ß√£o oficial do Git sobre hooks: [Git Hooks Documentation](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks)
- Documenta√ß√£o oficial do Git sobre reset: [Git Reset Documentation](https://git-scm.com/docs/git-reset)
- Documenta√ß√£o oficial do Git sobre revert: [Git Revert Documentation](https://git-scm.com/docs/git-revert)

Al√©m disso, voc√™ pode encontrar tutoriais online sobre esses t√≥picos em sites como:

- [Atlassian Git Tutorial](https://www.atlassian.com/git/tutorials)
- [Git SCM Documentation](https://git-scm.com/doc)
- [GitHub Guides](https://guides.github.com/)
- [Geeksforgeeks](https://www.geeksforgeeks.org/git-hooks/)

> Essas refer√™ncias devem fornecer informa√ß√µes detalhadas sobre como usar Git tags, Git hooks, Git reset e Git revert em seu fluxo de trabalho de desenvolvimento.

## Vis√£o Geral

1. Como criar uma tag leve no Git?
2. Qual a diferen√ßa entre uma tag leve e uma tag anotada no Git?
3. Como visualizar todas as tags em um reposit√≥rio Git?
4. Como fazer o checkout para uma tag espec√≠fica no Git?
5. Como excluir uma tag no Git?
6. Quais s√£o os tipos de Git Hooks dispon√≠veis?
7. Como configurar um Git Hook para ser executado antes de cada commit?
8. Como usar o Git revert para desfazer um commit espec√≠fico?
9. Qual a diferen√ßa entre o Git revert e o Git reset?
10. Como usar o Git reset para desfazer um commit e descartar as altera√ß√µes?
11. Se um commit for perdido, a tag sera perdida?

## Git Tag

As tags s√£o usadas no Git para marcar pontos espec√≠ficos no hist√≥rico do c√≥digo como vers√µes importantes. Existem dois tipos de tags: tags leves e tags anotadas.

![git-tags](./images/git-tag.png)

### Tags Leves

Uma tag leve √© apenas um ponteiro para um commit espec√≠fico. Para criar uma tag leve, voc√™ pode usar o comando `git tag <nome_da_tag>`. Por exemplo, para criar uma tag chamada "v1.0", voc√™ pode executar `git tag v1.0`.

### Tags Anotadas

Uma tag anotada √© um objeto completo no Git, que inclui informa√ß√µes como o nome do autor, data e mensagem. Para criar uma tag anotada, voc√™ pode usar o comando `git tag -a <nome_da_tag> -m "<mensagem_da_tag>"`. Por exemplo, para criar uma tag anotada chamada "v1.0" com a mensagem "Vers√£o 1.0 lan√ßada", voc√™ pode executar `git tag -a v1.0 -m "Vers√£o 1.0 lan√ßada"`.

### üìå Comparativo: Tag Leve vs Tag Anotada

| Tipo de Tag | Armazena Metadados? | Tem mensagem? | Hash pr√≥prio? | Ideal para...               |
| ----------- | ------------------- | ------------- | ------------- | --------------------------- |
| Tag leve    | ‚ùå N√£o              | ‚ùå N√£o        | ‚ùå N√£o        | Marca√ß√£o r√°pida             |
| Tag anotada | ‚úÖ Sim              | ‚úÖ Sim        | ‚úÖ Sim        | Vers√µes formais/lancamentos |

### Visualizando Tags

Para visualizar todas as tags em um reposit√≥rio Git, voc√™ pode usar o comando `git tag`. Isso listar√° todas as tags existentes.

### Checkout para uma Tag

Para fazer o checkout para uma tag espec√≠fica no Git, voc√™ pode usar o comando `git checkout <nome_da_tag>`. Por exemplo, para fazer o checkout para a tag "v1.0", voc√™ pode executar `git checkout v1.0`.

### Excluindo uma Tag

Para excluir uma tag no Git, voc√™ pode usar o comando `git tag -d <nome_da_tag>`. Por exemplo, para excluir a tag "v1.0", voc√™ pode executar `git tag -d v1.0`.

---

### üß™ Laborat√≥rio: Gerenciamento de Tags entre Branches

1. Crie tags em `main`:

```bash
git checkout main
git tag -a v1.0 -m "Vers√£o 1.0 em main"
```

2. Promova para `test` e crie nova tag:

```bash
git checkout test
git merge main -m "Merge v1.0 para test"
git tag -a v1.0-test -m "Vers√£o 1.0 testada"
```

3. Promova para `prod`:

```bash
git checkout prod
git merge test -m "Merge v1.0-test para prod"
git tag -a v1.0-prod -m "Vers√£o 1.0 em produ√ß√£o"
```

4. Ver tags:

```bash
git tag --list
```

### üí° Laboratorio parte 2

#### O que acontece ao fazer checkout de uma tag do branch prod estando no branch main?

> Ao executar `git checkout <tag>` enquanto est√° no branch `main` (ou qualquer outro), o Git:

1. O Git **Sai do branch atual** e entra em modo **detached HEAD**.
2. O reposit√≥rio passa a exibir o conte√∫do exato do commit referenciado pela **tag** (ex: uma vers√£o em `prod`).
3. **Voc√™ n√£o est√° mais em nenhum branch**, ent√£o qualquer commit feito nesse estado **n√£o ficar√° em um branch rastre√°vel** (a menos que voc√™ crie um novo branch a partir da√≠).

```bash
git checkout v1.0-prod
# HEAD agora est√° "solto" no commit da tag
```

> ‚úÖ Ideal para inspe√ß√£o ou build de vers√µes (cicd).
> ‚ö†Ô∏è Crie um branch (`git checkout -b`) se quiser desenvolver a partir da tag.

---

## Git Reset

O comando `git reset` √© usado para desfazer commits e alterar a posi√ß√£o do branch atual. Existem tr√™s formas principais de usar o `git reset`:

1. Soft Reset: `git reset --soft HEAD~1`

   - Este tipo de reset desfaz os commits, mas mant√©m as altera√ß√µes no diret√≥rio de trabalho e no √≠ndice. Os arquivos alterados ser√£o mantidos como altera√ß√µes n√£o adicionadas.
   - O _reset soft_ √© √∫til para fazer corre√ß√µes antes do _push_.

2. Mixed Reset (padr√£o): `git reset <commit>`

   - Este tipo de reset desfaz os commits e remove as altera√ß√µes do √≠ndice, mas mant√©m as altera√ß√µes no diret√≥rio de trabalho. Os arquivos alterados ser√£o mantidos como altera√ß√µes n√£o rastreadas.

3. Hard Reset: `git reset --hard <commit>`
   - Este tipo de reset desfaz os commits e descarta todas as altera√ß√µes, tanto no diret√≥rio de trabalho quanto no √≠ndice. Os arquivos alterados ser√£o perdidos permanentemente.

√â importante ter cuidado ao usar o `git reset`, pois ele pode reescrever o hist√≥rico do projeto. Certifique-se de ter um backup adequado antes de executar um reset.

Exemplo de uso do `git reset`:

- Desfazer o √∫ltimo commit e manter as altera√ß√µes no diret√≥rio de trabalho:

  ```
  git reset --soft HEAD~1
  ```

- Desfazer o √∫ltimo commit e remover as altera√ß√µes do √≠ndice:

  ```
  git reset HEAD~1
  ```

- Desfazer o √∫ltimo commit e descartar todas as altera√ß√µes:
  ```
  git reset --hard HEAD~1
  ```

Lembre-se de substituir `<commit>` pelo hash do commit que voc√™ deseja desfazer.

## Git Revert

O comando `git revert` √© usado para desfazer um commit espec√≠fico, criando um novo commit que desfaz as altera√ß√µes feitas no commit especificado. Esta √© uma maneira segura de desfazer altera√ß√µes, pois n√£o reescreve o hist√≥rico do projeto.

Para usar o `git revert` e desfazer um commit espec√≠fico, voc√™ pode usar o comando `git revert` <hash_do_commit>. Por exemplo, para desfazer o commit com o hash "abc123", voc√™ pode executar `git revert` abc123.

Quando voc√™ executa o `git revert`, o Git criar√° um novo commit que desfaz as altera√ß√µes feitas no commit especificado. Este novo commit ter√° as altera√ß√µes opostas, efetivamente cancelando o commit anterior.

√â importante observar que o `git revert` n√£o exclui ou remove o commit original. Em vez disso, ele adiciona um novo commit que desfaz as altera√ß√µes. Isso significa que o hist√≥rico de commits permanece intacto e voc√™ ainda pode ver o commit original e suas altera√ß√µes.

Usar o `git revert` √© uma maneira segura de desfazer altera√ß√µes, pois n√£o afeta outros branches ou commits. Ele permite desfazer seletivamente commits espec√≠ficos sem afetar o restante do hist√≥rico do projeto.

Lembre-se de substituir <hash_do_commit> pelo hash real do commit que voc√™ deseja desfazer.

---

### üîÅ Comparativo: `git reset` vs `git revert`

| Comando      | O que faz                                 | Impacta hist√≥rico? | Uso recomendado             |
| ------------ | ----------------------------------------- | ------------------ | --------------------------- |
| `git reset`  | Move o ponteiro HEAD para outro commit    | ‚úÖ Sim             | Reescrever hist√≥rico local  |
| `git revert` | Cria um novo commit que desfaz altera√ß√µes | ‚ùå N√£o             | Desfazer commits publicados |

---

## Git Hooks

Git Hooks s√£o scripts que podem ser executados antes ou depois de certos eventos do Git, como commit, push ou merge. Eles permitem automatizar tarefas e aprimorar seu fluxo de trabalho. Os Git Hooks s√£o armazenados no diret√≥rio `.git/hooks` do seu reposit√≥rio Git.

Existem v√°rios tipos de Git Hooks dispon√≠veis, incluindo:

- `pre-commit`: Executado antes de criar um commit.
- `prepare-commit-msg`: Executado antes de editar a mensagem do commit.
- `commit-msg`: Executado depois de editar a mensagem do commit.
- `post-commit`: Executado depois de criar um commit.
- `pre-rebase`: Executado antes de fazer um rebase em um branch.
- `post-checkout`: Executado depois de fazer checkout em um branch.
- `post-merge`: Executado depois de realizar um merge.
- `pre-push`: Executado antes de fazer um push.
- `post-receive`: Executado depois de receber um push.

### üìò Tabela: Tipos de Git Hooks

| Hook                 | Quando √© executado                         |
| -------------------- | ------------------------------------------ |
| `pre-commit`         | Antes de criar um commit                   |
| `prepare-commit-msg` | Antes de editar a mensagem de commit       |
| `commit-msg`         | Ap√≥s editar a mensagem de commit           |
| `post-commit`        | Ap√≥s criar um commit                       |
| `pre-rebase`         | Antes de fazer um rebase                   |
| `post-checkout`      | Ap√≥s mudar de branch                       |
| `post-merge`         | Ap√≥s um merge ser conclu√≠do                |
| `pre-push`           | Antes de enviar commits para o reposit√≥rio |
| `post-receive`       | Ap√≥s receber um push no reposit√≥rio remoto |

![git-hooks](./images/git-hooks.png)

Para configurar um Git Hook, voc√™ pode criar um arquivo com o nome do hook no diret√≥rio `.git/hooks` do seu reposit√≥rio Git. Por exemplo, para configurar um hook pre-commit, voc√™ pode criar um arquivo chamado `pre-commit` no diret√≥rio `.git/hooks` e adicionar o c√≥digo desejado.

Os Git Hooks podem ser escritos em qualquer linguagem de script, como Bash, Python ou Ruby. Eles podem ser usados para impor padr√µes de codifica√ß√£o, executar testes, realizar an√°lises de c√≥digo ou qualquer outra tarefa personalizada que voc√™ deseja automatizar em seu fluxo de trabalho do Git.

√â importante observar que os Git Hooks n√£o s√£o compartilhados entre reposit√≥rios. Cada reposit√≥rio tem seu pr√≥prio conjunto de hooks.

---

Claro! Aqui est√° uma se√ß√£o explicativa em **Markdown** sobre **publica√ß√£o de reposit√≥rios Git** com foco no uso do **GitHub como servi√ßo de hospedagem**, cobrindo os comandos `git push`, `git clone`, e contexto geral.

---

# ‚òÅÔ∏è Publica√ß√£o de Reposit√≥rios com GitHub

## üß† O que √© publicar um reposit√≥rio?

Publicar um reposit√≥rio significa **enviar seu c√≥digo local para um servidor online**, como o **GitHub**, para:

- Compartilhar com outras pessoas
- Fazer backup do seu c√≥digo
- Trabalhar de forma colaborativa
- Integrar com pipelines CI/CD, GitHub Actions, etc.

---

## üß∞ Pr√©-requisitos

1. Ter uma conta no [github.com](https://github.com)
2. Ter o Git configurado localmente com seu usu√°rio:

```bash
git config --global user.name "Seu Nome"
git config --global user.email "seu@email.com"
```

---

## üöÄ Passos para publicar um reposit√≥rio existente no GitHub

### 1. Crie um reposit√≥rio vazio no GitHub (sem README)

Acesse [https://github.com/new](https://github.com/new)
Escolha um nome, deixe **vazio**, e clique em **Create Repository**.

---

### 2. No terminal, dentro do seu projeto local:

Adicione o reposit√≥rio remoto:

```bash
git remote add origin https://github.com/SEU_USUARIO/NOME_DO_REPO.git
```

Empurre o reposit√≥rio para o GitHub:

```bash
git push -u origin main
```

> A flag `-u` cria o v√≠nculo entre a branch local `main` e a `origin/main`.

---

## üåç Clonando um reposit√≥rio existente

Se voc√™ quiser **baixar um reposit√≥rio que est√° no GitHub**, use:

```bash
git clone https://github.com/usuario/repositorio.git
```

Isso cria uma c√≥pia local do reposit√≥rio e j√° configura o `origin` para o reposit√≥rio remoto.

---

## üìå Comandos relacionados

| Comando                  | O que faz                                            |
| ------------------------ | ---------------------------------------------------- |
| `git remote -v`          | Lista os reposit√≥rios remotos configurados           |
| `git push origin main`   | Envia commits da branch `main` para o GitHub         |
| `git push origin --tags` | Envia todas as tags locais para o GitHub             |
| `git clone <url>`        | Baixa o reposit√≥rio remoto e cria uma c√≥pia local    |
| `git pull`               | Puxa atualiza√ß√µes do GitHub para o reposit√≥rio local |

---

## üîê Dica: Autentica√ß√£o com HTTPS ou SSH

O GitHub exige autentica√ß√£o para `push`. Voc√™ pode usar:

- **Token de acesso pessoal** (PAT) com HTTPS
- **Chaves SSH** para configurar acesso mais seguro (avan√ßado)

---

## Resumo

1. Para criar uma tag leve no Git, voc√™ pode usar o comando `git tag <nome_da_tag>`. Por exemplo, para criar uma tag chamada "v1.0", voc√™ pode executar `git tag v1.0`.

2. A diferen√ßa entre uma tag leve e uma tag anotada no Git √© que a tag leve √© apenas um ponteiro para um commit espec√≠fico, enquanto a tag anotada √© um objeto completo no Git, que inclui informa√ß√µes como o nome do autor, data e mensagem. Para criar uma tag anotada, voc√™ pode usar o comando `git tag -a <nome_da_tag> -m "<mensagem_da_tag>"`.

3. Para visualizar todas as tags em um reposit√≥rio Git, voc√™ pode usar o comando `git tag`. Isso listar√° todas as tags existentes.

4. Para fazer o checkout para uma tag espec√≠fica no Git, voc√™ pode usar o comando `git checkout <nome_da_tag>`. Por exemplo, para fazer o checkout para a tag "v1.0", voc√™ pode executar `git checkout v1.0`.

5. Para excluir uma tag no Git, voc√™ pode usar o comando `git tag -d <nome_da_tag>`. Por exemplo, para excluir a tag "v1.0", voc√™ pode executar `git tag -d v1.0`.

6. Os tipos de Git Hooks dispon√≠veis s√£o: pre-commit, prepare-commit-msg, commit-msg, post-commit, pre-rebase, post-checkout, post-merge, pre-push e post-receive.

7. Para configurar um Git Hook para ser executado antes de cada commit, voc√™ pode criar um arquivo com o nome do hook na pasta `.git/hooks` do seu reposit√≥rio Git. Por exemplo, para configurar um hook pre-commit, voc√™ pode criar um arquivo chamado `pre-commit` na pasta `.git/hooks` e adicionar o c√≥digo desejado.

8. Para usar o Git revert e desfazer um commit espec√≠fico, voc√™ pode usar o comando `git revert <hash_do_commit>`. Por exemplo, para reverter o commit com o hash "abc123", voc√™ pode executar `git revert abc123`.

9. A diferen√ßa entre o Git revert e o Git reset √© que o Git revert cria um novo commit que desfaz as altera√ß√µes do commit especificado, enquanto o Git reset move o branch atual para um commit espec√≠fico, descartando os commits posteriores.

10. Para usar o Git reset e desfazer um commit e descartar as altera√ß√µes, voc√™ pode usar o comando `git reset <hash_do_commit> --hard`. Por exemplo, para desfazer o commit com o hash "abc123" e descartar as altera√ß√µes, voc√™ pode executar `git reset abc123 --hard`.

11. Se um commit que possui uma tag √© perdido durante uma resolu√ß√£o de conflito, a tag n√£o √© perdida. A tag ainda apontar√° para o commit original, mesmo que esse commit n√£o esteja mais no branch atual ap√≥s a resolu√ß√£o do conflito. No entanto, se o commit for removido do hist√≥rico do Git (por exemplo, atrav√©s de um comando como git rebase), a tag ainda existir√°, mas apontar√° para um commit que n√£o est√° mais no hist√≥rico do branch. Nesse caso, a tag pode ser considerada "perdida" no sentido de que n√£o aponta para um commit no hist√≥rico do branch atual.
